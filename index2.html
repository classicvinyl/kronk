<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Music + Hydra Visuals</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: monospace;
    background-color: #0f0f0f;
    color: #eee;
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  .column {
    padding: 1em;
    overflow-y: auto;
  }

  .left {
    width: 20%;
    border-right: 1px solid #333;
  }

  .center {
    width: 60%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: stretch;
    border-right: 1px solid #333;
  }

  .right {
    width: 20%;
  }

  h2 { margin-bottom: 0.5em; }
  ul { list-style: none; }
  li { margin-bottom: 0.3em; }
  a { color: #eee; text-decoration: none; }
  a:hover { text-decoration: underline; }

  #hydra-canvas {
    flex: 1;
    width: 100%;
    height: 100%;
    display: block;
  }

  .right p {
    font-size: 0.9em;
    line-height: 1.3em;
  }
</style>
</head>
<body>

  <div class="column left">
    <h2>Tracks</h2>
    <ul>
      <li><a href="#">Track 1</a></li>
      <li><a href="#">Track 2</a></li>
      <li><a href="#">Track 3</a></li>
    </ul>
  </div>

  <div class="column center">
    <canvas id="hydra-canvas"></canvas>
  </div>

  <div class="column right">
    <h2>Info</h2>
    <p>Music + visuals inspired by MusicForProgramming.net and Hydra.</p>
    <p>Hydra sketch example_11 licensed under CC BY-NC-SA 4.0.</p>
  </div>

  <!-- ✔️ Correct Hydra CDN -->
  <script src="https://unpkg.com/hydra-synth/dist/hydra-synth.js"></script>

  <script>
    const canvas = document.getElementById("hydra-canvas");
    const dpr = window.devicePixelRatio || 1;

    const hydra = new Hydra({
      detectAudio: false,
      canvas: canvas,
    });

    function resizeHydraCanvas() {
      const w = canvas.clientWidth * dpr;
      const h = canvas.clientHeight * dpr;

      canvas.width = w;
      canvas.height = h;

      hydra._renderer.setSize(w, h, false);
      hydra.resize();
    }

    resizeHydraCanvas();
    window.addEventListener("resize", resizeHydraCanvas);

    /* ----- example_11 code ----- */
    osc(10, 0.9, 300)
      .color(0.9, 0.7, 0.8)
      .diff(
        osc(45, 0.3, 100)
          .color(0.9, 0.9, 0.9)
          .rotate(0.18)
          .pixelate(12)
          .kaleid()
      )
      .scrollX(10)
      .colorama()
      .luma()
      .repeatX(4)
      .repeatY(4)
      .modulate(
        osc(1, -0.9, 300)
      )
      .scale(2)
      .out();
  </script>

</body>
</html>
