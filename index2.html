<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Music + Hydra Visuals</title>
<style>
  /* --- Global Reset --- */
  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: monospace;
    background-color: #0f0f0f;
    color: #eee;
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  /* --- Three-column layout --- */
  .column {
    padding: 1em;
    overflow-y: auto;
  }

  .left {
    width: 20%;
    border-right: 1px solid #333;
  }

  .center {
    width: 60%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: stretch;
    border-right: 1px solid #333;
  }

  .right {
    width: 20%;
  }

  /* --- Sidebar track list --- */
  h2 { margin-bottom: 0.5em; }
  ul { list-style: none; }
  li { margin-bottom: 0.3em; }
  a { color: #eee; text-decoration: none; }
  a:hover { text-decoration: underline; }

  /* --- Hydra canvas --- */
  #hydra-canvas {
    flex: 1;
    display: block;
    width: 100%;
    height: 100%;
  }

  /* --- Right column content --- */
  .right h2 { margin-bottom: 0.5em; }
  .right p { font-size: 0.9em; line-height: 1.3em; }
</style>
</head>
<body>

  <!-- LEFT COLUMN -->
  <div class="column left">
    <h2>Tracks</h2>
    <ul>
      <li><a href="#">Track 1</a></li>
      <li><a href="#">Track 2</a></li>
      <li><a href="#">Track 3</a></li>
      <li><a href="#">Track 4</a></li>
      <li><a href="#">Track 5</a></li>
    </ul>
  </div>

  <!-- CENTER COLUMN -->
  <div class="column center">
    <canvas id="hydra-canvas"></canvas>
  </div>

  <!-- RIGHT COLUMN -->
  <div class="column right">
    <h2>Info</h2>
    <p>Music + visuals inspired by MusicForProgramming.net and Hydra.</p>
    <p>Hydra sketch <em>example_11</em> licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" style="color:#eee;">CC BY-NC-SA 4.0</a>.</p>
  </div>

  <!-- Hydra Library -->
  <script src="https://cdn.jsdelivr.net/npm/hydra-synth/dist/hydra-synth.js"></script>
  <script>
    const canvas = document.getElementById("hydra-canvas");
    const dpr = window.devicePixelRatio || 1;

    // Initialize Hydra
    const hydra = new Hydra({
      detectAudio: false,
      canvas: canvas
    });

    // Function to resize canvas and increase internal resolution
    function resizeHydraCanvas() {
      const w = canvas.clientWidth * dpr;
      const h = canvas.clientHeight * dpr;
      canvas.width = w;
      canvas.height = h;
      // Increase internal WebGL buffer resolution
      hydra._renderer.setSize(w, h, false);
      hydra.resize();
    }

    // Run initial resize
    resizeHydraCanvas();
    window.addEventListener('resize', resizeHydraCanvas);

    // --- Example_11 Hydra code ---
    osc(10, 0.9, 300)
      .color(0.9, 0.7, 0.8)
      .diff(
        osc(45, 0.3, 100)
          .color(0.9, 0.9, 0.9)
          .rotate(0.18)
          .pixelate(12)
          .kaleid()
      )
      .scrollX(10)
      .colorama()
      .luma()
      .repeatX(4)
      .repeatY(4)
      .modulate(
        osc(1, -0.9, 300)
      )
      .scale(2)
      .out();
  </script>
</body>
</html>
