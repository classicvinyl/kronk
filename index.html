<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>kronk</title>

<style>
/* ---------- BASE + PALETTE ---------- */
:root {
  --c-black:#1a1a1a; --c-white:#e1e1e1; --c-grey:#898989;
  --c-purple:#b462ff; --c-fuschia:#ff45b4; --c-blue:#18b6ff;
  --c-green:#1beb9e; --c-orange:#ff9528; --c-yellow:#dddd25;
  --line:2.5ch;
  --font:'IBM', monospace;
}

html,body{
  margin:0;
  background:var(--c-black);
  color:var(--c-white);
  height:100%;
  font-family:var(--font);
  line-height:var(--line);
}

body { font-size:3.97vw; }
@media (min-width: 768px) { body { font-size:2vw; } }
@media (min-width: 1024px) { body { font-size:1.11111111vw; } } 

/* ---------- HYDRA FULLSCREEN BACKGROUND ---------- */
#hydra-bg {
  position:fixed;
  top:0; left:0;
  width:100vw;
  height:100vh;
  z-index:0;
  overflow:hidden;
}
#hydra-canvas {
  width:100%; height:100%; display:block; background:black;
  pointer-events:none;
}

/* ---------- INFO PANEL ---------- */
#info-panel {
  position:fixed;
  top:0;
  left:0;
  z-index:3;
  font-size:1.3em;
  background:none;
  padding:var(--line) 0;
  line-height:1.3em;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
}
#track-info {
  margin-top:0.5ch;
  color:var(--c-green);
  word-break:break-word;
}

/* ---------- ICON ---------- */
#toggle-icon {
  cursor:pointer;
  user-select:none;
  font-size:15vw; /* 15% of viewport width */
  line-height:1;
  color:var(--c-white);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ---------- LINKS PANEL ---------- */
#links-panel {
  display:none;
  position:fixed;
  top:0;
  right:0;
  width:25vw;
  max-width:25vw;
  height:100vh;
  overflow-y:scroll;
  background:rgba(26,26,26,0.85);
  padding:var(--line);
  z-index:2;
  scrollbar-width:none;
  font-size:1.3em;
  line-height:1.35em;
  white-space:normal;
  word-break:break-word;
}
#links-panel::-webkit-scrollbar{display:none;}
.green.x-multi-column { column-count:1; column-gap:0; }

/* ---------- MOBILE STYLING ---------- */
@media (max-width: 768px) {
  #mobile-wrapper {
    display:flex;
    flex-direction:column;
  }
  #info-panel {
    position:relative !important;
    z-index:2 !important;
    margin-bottom:0.5em;
  }
  #links-panel {
    position:relative !important;
    top:auto !important;
    right:auto !important;
    width:100% !important;
    max-width:100% !important;
    height:auto !important;
    background: rgba(26,26,26,0.9) !important;
    padding: calc(var(--line)/2) !important;
    z-index:1 !important;
    overflow: visible !important;
  }
}
</style>
</head>
<body>

<!-- ---------- HYDRA BACKGROUND ---------- -->
<div id="hydra-bg">
  <canvas id="hydra-canvas"></canvas>
</div>
<script src="https://unpkg.com/hydra-synth"></script>
<script>
window.addEventListener('load', () => {
  const canvas = document.getElementById("hydra-canvas");
  const dpr = window.devicePixelRatio || 1;
  canvas.width = innerWidth * dpr;
  canvas.height = innerHeight * dpr;

  const hydra = new Hydra({ canvas, detectAudio:false, makeGlobal:true });

  osc(10,0.9,300)
    .color(0.9,0.7,0.8)
    .diff( osc(45,0.3,100).color(0.9,0.9,0.9).rotate(0.18).pixelate(12).kaleid() )
    .scrollX(10)
    .colorama()
    .luma()
    .repeatX(4)
    .repeatY(4)
    .modulate( osc(1,-0.9,300) )
    .scale(2)
    .out();

  addEventListener('resize',()=>{
    canvas.width = innerWidth * dpr;
    canvas.height = innerHeight * dpr;
    if(hydra.resize) hydra.resize();
  });
});
</script>

<!-- ---------- MOBILE WRAPPER ---------- -->
<div id="mobile-wrapper">

  <nav id="info-panel" class="noselect">
    <div id="toggle-icon">ðŸ”‡</div>
    <div id="track-info"></div>
  </nav>

  <!-- LINKS PANEL -->
  <aside id="links-panel">
    <div class="green x-multi-column">
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-7" target="_blank">Ecstatic Edits #7</a><br>
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-6" target="_blank">Ecstatic Edits #6</a><br>
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-5" target="_blank">Ecstatic Edits #5</a><br>
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-4" target="_blank">Ecstatic Edits #4</a><br>
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-3" target="_blank">Ecstatic Edits #3</a><br>
      <a href="https://soundbreakingsky.bandcamp.com/album/ecstatic-edits-2" target="_blank">Ecstatic Edits #2</a><br>
    </div>
  </aside>

</div>

<audio id="audio-player"></audio>

<script src="https://cdn.jsdelivr.net/npm/hydra-synth@2.0.0"></script>
<script>
const mp3Folder = "mp3/";
const mp3Files = [
  { file: "magnetize - hardcopy.mp3", link: "https://open.spotify.com/album/57ZDxDAMO5jVi7f0OTLYxA" },
  { file: "nwyvre - exotnotics.mp3", link: "https://fortevilfruit.bandcamp.com/album/manifes" },
  { file: "nwyvre - harmonic4.mp3", link: "https://nwyvre.bandcamp.com/album/harmonic" }
  // ... add all your tracks here ...
];

const audio = document.getElementById("audio-player");
const icon = document.getElementById("toggle-icon");
const trackInfo = document.getElementById("track-info");

function stripExt(f){return f.replace(/\.[^/.]+$/,"");}
let shuffleBag = [];
function refillBag(){shuffleBag = mp3Files.slice(); shuffleBag.sort(()=>Math.random()-0.5);}
function nextTrack(){if(shuffleBag.length===0) refillBag(); return shuffleBag.pop();}
function playRandom(){
  const t = nextTrack();
  audio.src = mp3Folder+t.file;
  audio.play().catch(()=>{});
  trackInfo.innerHTML = `<a href="${t.link}" target="_blank" style="color:var(--c-green)">${stripExt(t.file)}</a>`;
}

audio.addEventListener("ended", playRandom);

// Icon toggle
let clicked=false;
icon.addEventListener("click",()=>{
  if(!clicked){
    clicked=true;
    icon.textContent="ðŸŽ²";
    playRandom();
  } else {
    playRandom();
  }
});
</script>

</body>
</html>
